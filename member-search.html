<!DOCTYPE html>
<html lang="en">
<head>
  <!-- =========================
       Basic Meta
  ========================== -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Member Directory | Loukik Sangha</title>
  <meta name="description" content="Search Loukik Sangha members and view due, paid, and advance details." />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#0b1220" />

  <!-- =========================
       Canonical + OG
  ========================== -->
  <link rel="canonical" href="https://loukiksangha.org/member-search.html" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="Member Directory | Loukik Sangha" />
  <meta property="og:description" content="Search members and view due, paid, and advance details." />
  <meta property="og:image" content="https://loukiksangha.org/Images/logo.png" />
  <meta property="og:url" content="https://loukiksangha.org/member-search.html" />

  <!-- =========================
       Icons
  ========================== -->
  <link rel="icon" href="Images/logo.png" />
  <link rel="apple-touch-icon" href="Images/logo.png" />

  <!-- =========================
       CSS + Icons
  ========================== -->
  <link rel="stylesheet" href="member-search.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- =========================
       Live Visitors (Module)
  ========================== -->
  <script type="module" src="live-visitors.js"></script>
</head>

<body>

  <!-- =========================
       TOPBAR / NAV
  ========================== -->
  <header class="topbar">
    <div class="wrap nav-inner">

      <!-- Brand -->
      <a class="brand" href="index.html" aria-label="Loukik Sangha Home">
        <span class="brand-logo">
          <img src="Images/logo.png" alt="Loukik Sangha Logo" />
        </span>

        <span class="brand-text">
          <strong>Loukik Sangha</strong>
          <small>
            Seva is Our Dharma. üïâÔ∏è
            <span class="since-inline" aria-label="Since 2018">Since 2018</span>
          </small>
        </span>
      </a>

      <!-- Mobile Nav Toggle -->
      <button class="nav-toggle" id="navToggle" type="button"
              aria-label="Toggle menu" aria-controls="navMenu" aria-expanded="false">
        <i class="fa-solid fa-bars" aria-hidden="true"></i>
        <span class="sr-only">Menu</span>
      </button>

      <!-- Desktop/Mobile Menu -->
      <nav class="menu" id="navMenu" aria-label="Main Navigation">
        <a class="nav-link" data-page="index.html" href="index.html">Home</a>
        <a class="nav-link" data-page="member-search.html" href="member-search.html">Members</a>
        <a class="nav-link" data-page="donate.html" href="donate.html">Donate</a>

        <!-- More dropdown -->
        <div class="nav-dd" id="moreDD">
          <button class="nav-dd-btn" id="moreBtn" type="button" aria-haspopup="true" aria-expanded="false">
            More <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
          </button>

          <div class="nav-dd-list" id="moreMenu" role="menu" aria-label="More links">
            <a class="nav-dd-link" role="menuitem" data-page="rules.html" href="rules.html">Rules</a>
            <a class="nav-dd-link" role="menuitem" data-page="vision.html" href="vision.html">Vision</a>
            <a class="nav-dd-link" role="menuitem" data-page="contact.html" href="contact.html">Contact</a>
          </div>
        </div>

        <!-- Theme toggle -->
        <button class="theme-toggle icon-only" id="themeToggle" type="button" aria-label="Toggle theme">
          <i id="themeIcon" class="fa-solid fa-moon" aria-hidden="true"></i>
        </button>
      </nav>

      <!-- Live visitors pill -->
      <div class="live-pill" title="Live visitors" aria-label="Live visitors">
        <span class="live-dot" aria-hidden="true"></span>
        <span id="liveCount" class="live-count">0</span>
      </div>
    </div>
  </header>

  <!-- =========================
       MAIN
  ========================== -->
  <main class="main">

    <!-- Hero -->
    <section class="hero">
      <div class="wrap hero-inner">
        <h1 class="hero-title">Member Search</h1>
        <p class="hero-sub">Search member by name / phone / member code and view records.</p>

        <div class="searchbar" role="search">
          <input id="q" type="text" placeholder="Search by member name or phone..." autocomplete="off" />
          <button id="searchBtn" class="btn btn-primary btn-search" type="button">
            <i class="fa-solid fa-magnifying-glass"></i> Search
          </button>
        </div>
      </div>
    </section>

    <!-- Content -->
    <section class="content">
      <div class="wrap">
        <div class="panel">

          <!-- Results -->
          <div class="panel-head">
            <h2>Results</h2>
            <span class="badge" id="count">0</span>
          </div>

          <p class="hint" id="searchMsg"></p>

          <div id="results" class="results">
            <div class="empty" id="emptyState">
              <i class="fa-regular fa-folder-open"></i>
              <p>No results yet. Search to see member records.</p>
            </div>

            <div class="cards" id="cards" style="display:none;"></div>
          </div>

          <!-- Results table -->
          <div class="tableWrap" id="tableWrap" style="display:none;">
            <table class="tbl">
              <thead>
                <tr>
                  <th style="width:70px;">Serial</th>
                  <th style="width:120px;">Joining Date</th>
                  <th>Name</th>
                  <th style="width:160px;">Monthly Installment</th>
                  <th style="width:110px;">Paid</th>
                  <th style="width:110px;">Due</th>
                  <th style="width:120px;">Advanced</th>
                  <th style="width:130px;">Total</th>
                  <th style="width:180px;">Remarks</th>
                </tr>
              </thead>
              <tbody id="resultsTbody"></tbody>
            </table>
          </div>

          <div class="divider"></div>

          <!-- Membership -->
          <div class="panel-head">
            <h2>Membership</h2>
            <span class="badge badge-soft"><i class="fa-solid fa-user-plus"></i> Join</span>
          </div>

          <p class="hint" id="joinMsg">Fill the form to request membership. Photo is optional.</p>

          <div class="join-wrap">

            <!-- Join form -->
            <section class="join-card" aria-label="Become a Member">
              <div class="mini-head">
                <div>
                  <h3 class="mini-title">Become a Member</h3>
                  <p class="mini-sub">Quick request.</p>
                </div>
                <span class="mini-badge"><i class="fa-solid fa-clipboard-check"></i></span>
              </div>

              <form class="join-form" id="joinForm" autocomplete="off">
                <div class="f-grid">
                  <div class="f-field">
                    <label class="f-label" for="jName">Full Name</label>
                    <input class="f-input" id="jName" type="text" placeholder="Your full name" required />
                  </div>

                  <div class="f-field">
                    <label class="f-label" for="jPhone">Phone</label>
                    <input class="f-input" id="jPhone" type="tel" placeholder="+8801XXXXXXXXX" required />
                  </div>

                  <div class="f-field">
                    <label class="f-label" for="jGender">Gender</label>
                    <select class="f-input" id="jGender" required>
                      <option value="">Select gender</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>

                  <div class="f-field">
                    <label class="f-label" for="jJoinMonth">Joining Month</label>
                    <input class="f-input" id="jJoinMonth" type="month" required />
                  </div>

                  <div class="f-field">
                    <label class="f-label" for="jMonthly">Monthly Installment</label>
                    <input class="f-input" id="jMonthly" type="number" min="0" step="1" placeholder="e.g. 200" required />
                  </div>

                  <div class="f-field">
                    <label class="f-label" for="jAddress">Address</label>
                    <input class="f-input" id="jAddress" type="text" placeholder="Village/Thana/District" required />
                  </div>

                  <div class="f-field f-wide">
                    <label class="f-label" for="jRemarks">Remarks (optional)</label>
                    <input class="f-input" id="jRemarks" type="text" placeholder="Any note..." />
                  </div>

                  <div class="f-field f-wide">
                    <label class="f-label" for="jPhoto">Photo (optional)</label>
                    <input class="f-input" id="jPhoto" type="file" accept="image/*" />
                    <small class="f-help">Optional. If you upload, it will show on your membership card.</small>
                  </div>
                </div>

                <div class="f-actions">
                  <button class="btn btn-primary" type="submit" id="joinSubmit">
                    <i class="fa-solid fa-paper-plane"></i> Submit
                  </button>
                  <button class="btn btn-soft" type="button" id="joinReset">
                    <i class="fa-solid fa-rotate-left"></i> Reset
                  </button>
                </div>
              </form>
            </section>

            <!-- Insights -->
            <aside class="insight-card" aria-label="Membership Insights">
              <div class="mini-head">
                <div>
                  <h3 class="mini-title">Member Insights</h3>
                  <p class="mini-sub">Auto summary database.</p>
                </div>
                <span class="mini-badge"><i class="fa-solid fa-chart-simple"></i></span>
              </div>

              <div class="insight-grid">
                <div class="ibox">
                  <small>Total Members</small>
                  <b id="statTotal">0</b>
                </div>
                <div class="ibox">
                  <small>Due Members</small>
                  <b id="statDue">0</b>
                </div>
                <div class="ibox">
                  <small>Advance Members</small>
                  <b id="statAdv">0</b>
                </div>
                <div class="ibox">
                  <small>Paid</small>
                  <b id="statPaid">0</b>
                </div>
              </div>

              <div class="snap">
                <div class="snap-head">
                  <h4 class="snap-title"><i class="fa-solid fa-calendar-days"></i> Monthly Collection Snapshot</h4>
                  <span class="snap-pill" id="snapMonth">‚Äî</span>
                </div>

                <div class="snap-grid">
                  <div class="sbox">
                    <small>Collected</small>
                    <b id="snapCollected">‡ß≥0</b>
                  </div>
                  <div class="sbox">
                    <small>Payers</small>
                    <b id="snapPayers">0</b>
                  </div>
                  <div class="sbox">
                    <small>Monthly Target</small>
                    <b id="snapTarget">‡ß≥0</b>
                  </div>
                  <div class="sbox">
                    <small>Coverage</small>
                    <b id="snapCoverage">0%</b>
                  </div>
                </div>

                <p class="snap-hint" id="snapHint"></p>
              </div>

              <div class="consistent">
                <div class="cons-head">
                  <h4 class="cons-title"><i class="fa-solid fa-award"></i> Consistent Payers (Last 3 Months)</h4>
                  <span class="cons-pill">Top 3</span>
                </div>

                <ol class="payer-list" id="payerList">
                  <li class="payer-empty">No payer data yet.</li>
                </ol>
              </div>
            </aside>
          </div>

          <div class="divider"></div>

          <!-- All Members -->
          <div class="panel-head">
            <h2>All Members</h2>
            <span class="badge" id="allCount">0</span>
          </div>

          <div class="list-toolbar" aria-label="All members filters">
            <div class="seg" role="tablist" aria-label="Filter members">
              <button class="seg-btn is-active" type="button" data-list-filter="all">
                <i class="fa-solid fa-layer-group"></i> All
                <span class="seg-mini" id="segAll">0</span>
              </button>
              <button class="seg-btn" type="button" data-list-filter="due">
                <i class="fa-solid fa-triangle-exclamation"></i> Due
                <span class="seg-mini" id="segDue">0</span>
              </button>
              <button class="seg-btn" type="button" data-list-filter="paid">
                <i class="fa-solid fa-circle-check"></i> Paid
                <span class="seg-mini" id="segPaid">0</span>
              </button>
              <button class="seg-btn" type="button" data-list-filter="advance">
                <i class="fa-solid fa-forward"></i> Advance
                <span class="seg-mini" id="segAdv">0</span>
              </button>
            </div>

            <div class="toolbar-right">
              <select id="sortMembers" class="sort" aria-label="Sort members">
                <option value="code">Sort: Member Code</option>
                <option value="name">Sort: Name</option>
                <option value="dueDesc">Sort: Due (High ‚Üí Low)</option>
                <option value="paidDesc">Sort: Paid (High ‚Üí Low)</option>
                <option value="joinAsc">Sort: Joining (Old ‚Üí New)</option>
                <option value="joinDesc">Sort: Joining (New ‚Üí Old)</option>
              </select>
            </div>
          </div>

          <div class="tableWrap" id="allTableWrap" style="display:none;">
            <table class="tbl">
              <thead>
                <tr>
                  <th style="width:70px;">Serial</th>
                  <th style="width:120px;">Joining Date</th>
                  <th>Name</th>
                  <th style="width:160px;">Monthly Installment</th>
                  <th style="width:110px;">Paid</th>
                  <th style="width:110px;">Due</th>
                  <th style="width:120px;">Advanced</th>
                  <th style="width:130px;">Total</th>
                  <th style="width:180px;">Remarks</th>
                </tr>
              </thead>
              <tbody id="allTbody"></tbody>
            </table>
          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- =========================
       FOOTER
  ========================== -->
  <footer class="footer">
    <div class="wrap footer-grid">
      <div class="f-col">
        <div class="f-brand">
          <img class="f-logo" src="Images/logo.png" alt="Loukik Sangha Logo" />
          <div>
            <h3 class="f-title">Loukik Sangha</h3>
            <p class="f-text">Building a stronger community through collective support and transparent financial management.</p>
          </div>
        </div>

        <div class="f-social" aria-label="Social links">
          <a class="f-social-btn" href="#" aria-label="Facebook" title="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
          <a class="f-social-btn" href="#" aria-label="YouTube" title="YouTube"><i class="fa-brands fa-youtube"></i></a>
          <a class="f-social-btn" href="#" aria-label="WhatsApp" title="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
          <a class="f-social-btn" href="mailto:info@loukiksangha.org" aria-label="Email" title="Email"><i class="fa-solid fa-envelope"></i></a>
        </div>
      </div>

      <div class="f-col">
        <h3 class="f-title">Quick Links</h3>
        <a class="f-link" href="donate.html">Donate</a>
        <a class="f-link" href="rules.html">Rules</a>
        <a class="f-link" href="privacy.html">Privacy Policy</a>
        <a class="f-link" href="terms.html">Terms & Conditions</a>
        <a class="f-link" href="contact.html">Contact</a>
      </div>

      <div class="f-col">
        <h3 class="f-title">Contact</h3>
        <p class="f-text">Email: info@loukiksangha.org</p>
        <p class="f-text">Phone: +880 1XXX-XXXXXX</p>
        <p class="f-text">Address: Dhaka, Bangladesh</p>
      </div>
    </div>

    <div class="wrap f-bottom">
      <div class="f-line"></div>
      <div class="f-copy">¬© <span id="year"></span> Loukik Sangha. All rights reserved.</div>
    </div>
  </footer>

  <!-- =========================
       JS
       nav.js -> only active link highlight (optional)
       member-search.js -> all functionality (nav toggle + theme + firestore)
  ========================== -->
  <script src="nav.js" defer></script>
  <script type="module" src="member-search.js"></script>
</body>
</html>
